---
import BaseLayout from '../layouts/BaseLayout.astro';
---

<BaseLayout title="Art | Journal" description="Generative art explorations">
  <div class="art-wrapper">
    <iframe
      id="artFrame"
      src="/generator/app.html"
      title="Generative Art"
      allow="fullscreen"
    ></iframe>
  </div>
</BaseLayout>

<style>
  .art-wrapper {
    position: relative;
    width: 100%;
    height: calc(100vh - 60px);
    background: #000;
  }

  .art-wrapper iframe {
    width: 100%;
    height: 100%;
    border: none;
    display: block;
  }

  /* Override container styles for full-width art */
  :global(.container) {
    max-width: none !important;
    padding: 0 !important;
  }
</style>

<script>
  // Handle slash button click to toggle generator menu
  const slashBtn = document.getElementById('slashCmd');
  const artFrame = document.getElementById('artFrame') as HTMLIFrameElement;

  slashBtn?.addEventListener('click', () => {
    artFrame?.contentWindow?.postMessage('toggleMenu', '*');
  });

  // Also handle "/" key press
  document.addEventListener('keydown', (e) => {
    const isInputFocused = document.activeElement?.tagName === 'INPUT' || 
                           document.activeElement?.tagName === 'TEXTAREA';
    if (e.key === '/' && !isInputFocused) {
      e.preventDefault();
      artFrame?.contentWindow?.postMessage('toggleMenu', '*');
    }
  });
</script>
